<!DOCTYPE html>
<html>
<head>
  <title>Cricket Prediction ‚Äì Live & Insights</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    .live-button {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px 0;
    }
    .live-button button {
      background: red;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    iframe {
      width: 100%;
      max-width: 640px;
      height: 360px;
      margin: auto;
      display: block;
      border: none;
      margin-top: 20px;
    }
    .predictions {
      margin-top: 30px;
      background: #222;
      padding: 20px;
      border-radius: 10px;
    }
    .prediction {
      margin-bottom: 20px;
      border-bottom: 1px solid #444;
      padding-bottom: 10px;
    }
    .team {
      font-size: 18px;
    }
    .top-player {
      font-style: italic;
      color: #ccc;
    }
  </style>
</head>
<body>

  <h1>üèè Cricket Match Predictions</h1>

  <!-- üî¥ Live Test Button -->
  <div class="live-button">
    <button onclick="toggleStream()">
      ‚ñ∂Ô∏è Live Test
    </button>
  </div>

  <!-- üì∫ Live iframe -->
  <div id="stream" style="display:none;">
    <iframe src="https://cdn07isb.tamashaweb.com:8087/YlUHeDQb7a/157-3H/playlist.m3u8" allowfullscreen></iframe>
  </div>

  <!-- üîÆ Predictions -->
  <div class="predictions" id="predictions">
    <h2>üî• Latest Predictions</h2>
    <!-- Filled by JS -->
  </div>

  <!-- ‚úÖ Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCutZ4-S27z8DzRQQnREMDLKdP-b3zV95s",
      authDomain: "cricketpredition-5a66d.firebaseapp.com",
      projectId: "cricketpredition-5a66d",
      storageBucket: "cricketpredition-5a66d.appspot.com",
      messagingSenderId: "980647942349",
      appId: "1:980647942349:web:8e2100fdc783723623b184"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const predictionBox = document.getElementById("predictions");

    // Fetch predictions
    db.collection("my-predictions")
      .orderBy("timestamp", "desc")
      .onSnapshot((snapshot) => {
        predictionBox.innerHTML = "<h2>üî• Latest Predictions</h2>";
        snapshot.forEach((doc) => {
          const data = doc.data();
          predictionBox.innerHTML += `
            <div class="prediction">
              <div class="team">${data.match}</div>
              <div>${data.teamA}: ${data.teamAPercent}% vs ${data.teamB}: ${data.teamBPercent}%</div>
              <div class="top-player">Top Player: ${data.topPlayer}</div>
            </div>
          `;
        });
      });

    // Live Button toggle
    function toggleStream() {
      const stream = document.getElementById("stream");
      stream.style.display = stream.style.display === "none" ? "block" : "none";
    }
  </script>

</body>
</html>
