<!DOCTYPE html>
<html>
<head>
  <title>Cricket Prediction ‚Äì Live & Score</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      padding: 20px;
      margin: 0;
    }
    h1, h2 {
      text-align: center;
    }
    .section {
      margin: 30px auto;
      max-width: 640px;
      background: #1c1c1c;
      padding: 20px;
      border-radius: 10px;
    }
    button {
      background: #e53935;
      color: white;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #c62828;
    }
    iframe {
      width: 100%;
      height: 360px;
      border: none;
      border-radius: 8px;
      margin-top: 15px;
    }
    .prediction {
      border-bottom: 1px solid #444;
      padding: 10px 0;
    }
    .top-player {
      font-style: italic;
      color: #ccc;
    }
  </style>
</head>
<body>

  <h1>üèè Cricket Predictions & Live</h1>

  <!-- üî¥ Live Stream Toggle -->
  <div class="section">
    <button onclick="toggleStream()">‚ñ∂Ô∏è Live Test Stream</button>
    <div id="streamContainer"></div>
  </div>

  <!-- üü¢ Live Score from Crictimes -->
  <div class="section">
    <h2>üü¢ Live Score</h2>
    <iframe src="https://widget.crictimes.org" height="200"></iframe>
  </div>

  <!-- üîÆ Predictions Section -->
  <div class="section" id="predictions">
    <h2>üî• Latest Predictions</h2>
    <!-- JavaScript will fill predictions here -->
  </div>

  <!-- ‚úÖ Firebase -->
  <script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCutZ4-S27z8DzRQQnREMDLKdP-b3zV95s",
      authDomain: "cricketpredition-5a66d.firebaseapp.com",
      projectId: "cricketpredition-5a66d",
      storageBucket: "cricketpredition-5a66d.appspot.com",
      messagingSenderId: "980647942349",
      appId: "1:980647942349:web:8e2100fdc783723623b184"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // üîÆ Load Predictions
    const predictionBox = document.getElementById("predictions");
    db.collection("my-predictions")
      .orderBy("timestamp", "desc")
      .onSnapshot(snapshot => {
        predictionBox.innerHTML = "<h2>üî• Latest Predictions</h2>";
        snapshot.forEach(doc => {
          const data = doc.data();
          predictionBox.innerHTML += `
            <div class="prediction">
              <strong>${data.match}</strong><br/>
              ${data.teamA}: ${data.teamAPercent}% vs ${data.teamB}: ${data.teamBPercent}%<br/>
              <div class="top-player">Top Player: ${data.topPlayer}</div>
            </div>
          `;
        });
      });

    // üé¨ Toggle Live Stream with Audio Stop
    let isStreamOn = false;
    function toggleStream() {
      const container = document.getElementById("streamContainer");
      if (!isStreamOn) {
        container.innerHTML = `
          <iframe
            src="https://html5player.tamashaweb.com/?url=https://cdn07isb.tamashaweb.com:8087/YlUHeDQb7a/157-3H/playlist.m3u8"
            allowfullscreen>
          </iframe>`;
        isStreamOn = true;
      } else {
        container.innerHTML = ""; // remove iframe = stop video/audio
        isStreamOn = false;
      }
    }
  </script>

</body>
</html>
