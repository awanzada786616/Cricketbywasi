<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wasi Tube - YouTube Style</title>

<!-- Font Awesome for FAF Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
  body {
    margin:0;
    background:#0f0f0f;
    color:#fff;
    font-family:'Poppins', sans-serif;
  }
  header {
    text-align:center;
    padding:15px;
    font-size:1.8rem;
    font-weight:bold;
    background:linear-gradient(to right,#ff512f,#dd2476);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .topbar {
    display:flex;
    justify-content:center;
    gap:10px;
    padding:10px;
    flex-wrap:wrap;
  }
  input {
    padding:10px;
    width:65%;
    max-width:500px;
    border:none;
    border-radius:8px;
    font-size:1rem;
  }
  button {
    padding:10px 16px;
    border:none;
    border-radius:8px;
    background:#ff512f;
    color:#fff;
    cursor:pointer;
  }

  /* Fixed Player Section */
  .player {
    position:sticky;
    top:0;
    background:#000;
    display:flex;
    flex-direction:column;
    align-items:center;
    z-index:10;
    box-shadow:0 4px 12px rgba(0,0,0,0.5);
  }
  #player {
    width:100%;
    max-width:900px;
    height:50vw;
    max-height:480px;
  }
  .controls {
    display:flex;
    justify-content:center;
    gap:25px;
    padding:10px;
    background:#111;
    width:100%;
  }
  .controls i {
    font-size:1.6rem;
    color:#ff512f;
    cursor:pointer;
    transition:0.2s;
  }
  .controls i:hover { color:#ff7b42; transform:scale(1.2); }

  /* Video Cards */
  .cards {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:20px;
    padding:20px;
  }
  .card {
    width:320px;
    background:#1c1c1c;
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 4px 10px rgba(0,0,0,0.4);
    cursor:pointer;
    transition:transform 0.2s;
  }
  .card:hover {transform:scale(1.05);}
  .card img {
    width:100%;
    height:180px;
    object-fit:cover;
  }
  .card h4 {
    padding:10px;
    margin:0;
    font-size:0.9rem;
  }
  footer {
    text-align:center;
    padding:15px;
    color:#aaa;
    font-size:0.9rem;
  }
</style>
</head>
<body>

<header>ðŸŽ¬ Wasi Tube</header>

<div class="topbar">
  <input id="query" placeholder="Search any video..." onkeydown="if(event.key==='Enter') searchVideos()" />
  <button onclick="searchVideos()">Search</button>
</div>

<!-- Main Player -->
<div class="player">
  <div id="player"></div>
  <div class="controls">
    <i class="fa-solid fa-backward" onclick="rewind()"></i>
    <i class="fa-solid fa-play" id="playPauseBtn" onclick="togglePlay()"></i>
    <i class="fa-solid fa-forward" onclick="forward()"></i>
    <i class="fa-solid fa-volume-high" id="muteBtn" onclick="toggleMute()"></i>
    <i class="fa-solid fa-expand" onclick="fullscreen()"></i>
  </div>
</div>

<div id="cards" class="cards"></div>
<footer>Â© 2025 Wasi Tube â€¢ Created by Awais Shani Adeel</footer>

<script>
  const apiKey = "AIzaSyCJ5f3o71_PJcI3q4NrdrtC7s9F2iVQVBw";
  let player, currentVideo;

  // Load YouTube API
  let tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  document.body.appendChild(tag);

  // When API ready
  function onYouTubeIframeAPIReady(){
    player = new YT.Player('player', {
      height:'390', width:'640', videoId:'',
      playerVars:{'playsinline':1}
    });
    searchVideos("Latest Pakistani Dramas");
  }

  // Search Function
  async function searchVideos(queryParam){
    const query = queryParam || document.getElementById("query").value.trim();
    if(!query) return alert("Please enter search term.");
    document.getElementById("cards").innerHTML="<p>Loading...</p>";

    try{
      const res = await fetch(
        `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=12&q=${encodeURIComponent(query)}&key=${apiKey}`
      );
      const data = await res.json();
      document.getElementById("cards").innerHTML="";
      if(!data.items) return alert("No results found.");

      currentVideo = data.items[0].id.videoId;
      player.loadVideoById(currentVideo);

      data.items.forEach(item=>{
        const vid = item.id.videoId;
        const card=document.createElement("div");
        card.className="card";
        card.innerHTML=`<img src="${item.snippet.thumbnails.high.url}" alt="">
                        <h4>${item.snippet.title}</h4>`;
        card.onclick=()=>loadVideo(vid);
        document.getElementById("cards").appendChild(card);
      });
    }catch(err){
      console.error(err);
      document.getElementById("cards").innerHTML="<p>Error loading results.</p>";
    }
  }

  // Load selected video
  function loadVideo(id){
    currentVideo=id;
    player.loadVideoById(id);
    window.scrollTo({top:0,behavior:'smooth'});
  }

  // FAF Control Functions
  function togglePlay(){
    const btn=document.getElementById("playPauseBtn");
    if(player.getPlayerState()==YT.PlayerState.PLAYING){
      player.pauseVideo();
      btn.classList.replace("fa-pause","fa-play");
    }else{
      player.playVideo();
      btn.classList.replace("fa-play","fa-pause");
    }
  }
  function toggleMute(){
    const btn=document.getElementById("muteBtn");
    if(player.isMuted()){
      player.unMute();
      btn.classList.replace("fa-volume-xmark","fa-volume-high");
    }else{
      player.mute();
      btn.classList.replace("fa-volume-high","fa-volume-xmark");
    }
  }
  function forward(){
    let t=player.getCurrentTime(); player.seekTo(t+10,true);
  }
  function rewind(){
    let t=player.getCurrentTime(); player.seekTo(t-10,true);
  }
  function fullscreen(){
    const iframe = player.getIframe();
    if(iframe.requestFullscreen) iframe.requestFullscreen();
  }
</script>

</body>
</html>
